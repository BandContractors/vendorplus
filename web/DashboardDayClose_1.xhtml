<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Day Closing</title>
        <link href="resources/images/sys_icon.ico" rel="shortcut icon" type="image/x-icon" />         
        <link rel="stylesheet" type="text/css" href="style.css?ln=css"/>
        <script  language="javascript">
            function confirmDelete()
            {
                return confirm('Are you sure you want to delete this current record?');
            }
            function alertSave()
            {
                return alert('Record saved successfully!');
            }
        </script>
        <script type="text/javascript" src="resources/js/Chart.js"></script>
        <script type="text/javascript" src="resources/js/Chart.min.js"></script>
    </h:head>
    <f:metadata>
        <f:viewAction action="#{navigationBean.checkAccessDenied('72', 'View')}"/>
        <f:viewAction action="#{dashboardBean.initDayCloseDashboard()}"/>
    </f:metadata>
    <h:body>
        <style type="text/css">
            .col-container {
                display: table; /* Make the container element behave like a table */
                width: 100%; /* Set full-width to expand the whole page */
            }
            .col {
                display: table-cell; /* Make elements inside the container behave like table cells */
            }
            /* If the browser window is smaller than 600px, make the columns stack on top of each other */
            @media only screen and (max-width: 600px) {
                .col { 
                    display: block;
                    width: 100%;
                }
            }
        </style>
        <div>
            <ui:include src="Menu.xhtml"/>
            <h:form id="formReport">
                <h:panelGrid id="pnlgHeader" styleClass="clsPanelReportFilterTitle">
                    <h:outputLabel styleClass="clsLabelReportFilterTitle" value="Day Closing Dashboard"/>
                </h:panelGrid>
                <h:panelGrid id="pnlgFilter" columns="4" styleClass="clsPanelReportFilter">
                    <p:outputLabel value="Date:"/>
                    <p:datePicker id="multiselect" selectionMode="multiple" value="#{dashboardBean.multipleDates}" readonlyInput="false" pattern="#{companySetting.getDateFormat()}" autocomplete="false" />
                    <p:commandButton id="cmdbSearch" value="SEARCH" onclick="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
                        <p:dialog widgetVar="statusDialog" height="100" position="center" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                            <p:graphicImage name="/images/ajax-loader.gif"/>
                        </p:dialog>
                        <p:ajax listener="#{dashboardBean.searchDayCloseDashboard()}" process="pnlgFilter" update="growl1 sales receipts purchases payments"/>
                    </p:commandButton>
                    <p:commandButton id="cmdbReset" value="RESET">
                        <p:ajax listener="#{dashboardBean.initDayCloseDashboard()}" process="pnlgFilter" update="pnlgFilter growl1 sales receipts purchases payments"/>
                    </p:commandButton>
                </h:panelGrid>

                <p:growl id="growl1" showDetail="true" />

                <div class="col-container">
                    <div class="col">
                        <p:panel id="sales" header="Sales" style="background-color: #007500;">
                            <p:dataTable var="sl" value="#{dashboardBean.dayCloseSalesList}">
                                <p:column headerText="By Sales Date" style="font-size: 11px;">
                                    #{sl.transactionReasonName}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{sl.currencyCode}
                                </p:column>
                                <p:column headerText="Amount" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(sl.grandTotal,sl.currencyCode)}
                                </p:column>
                            </p:dataTable>
                            <p:dataTable var="sl2" value="#{dashboardBean.dayCloseSalesList2}">
                                <p:column headerText="By Add Date" style="font-size: 11px;">
                                    #{sl2.transactionReasonName}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{sl2.currencyCode}
                                </p:column>
                                <p:column headerText="Amount" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(sl2.grandTotal,sl2.currencyCode)}
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </div>

                    <div class="col">
                        <p:panel  id="receipts" header="Cash Receipts" style="background-color: #007500;">
                            <p:dataTable var="cr" value="#{dashboardBean.dayCloseCashReceiptList}">
                                <p:column headerText="By Receipt Date" style="font-size: 11px;">
                                    #{cr.payRefNo}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{cr.currencyCode}
                                </p:column>
                                <p:column headerText="Received" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(cr.paidAmount,cr.currencyCode)}
                                </p:column>
                            </p:dataTable>
                            <p:dataTable var="cr2" value="#{dashboardBean.dayCloseCashReceiptList2}">
                                <p:column headerText="By Add Date" style="font-size: 11px;">
                                    #{cr2.payRefNo}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{cr2.currencyCode}
                                </p:column>
                                <p:column headerText="Received" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(cr2.paidAmount,cr2.currencyCode)}
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </div>

                    <div class="col">
                        <p:panel  id="purchases" header="Purchases and Expenses" style="background-color: #E60000;">
                            <p:dataTable var="pl" value="#{dashboardBean.dayClosePurchaseList}">
                                <p:column headerText="By Purchase Date" style="font-size: 11px;">
                                    #{pl.transactionReasonName}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{pl.currencyCode}
                                </p:column>
                                <p:column headerText="Amount" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(pl.grandTotal,pl.currencyCode)}
                                </p:column>
                            </p:dataTable>
                            <p:dataTable var="pl2" value="#{dashboardBean.dayClosePurchaseList2}">
                                <p:column headerText="By Purchase Date" style="font-size: 11px;">
                                    #{pl2.transactionReasonName}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{pl2.currencyCode}
                                </p:column>
                                <p:column headerText="Amount" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(pl2.grandTotal,pl2.currencyCode)}
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </div>

                    <div class="col">
                        <p:panel  id="payments" header="Cash Payments" style="background-color:#E60000;">
                            <p:dataTable var="cp" value="#{dashboardBean.dayCloseCashReceiptList}">
                                <p:column headerText="By Pay Date" style="font-size: 11px;">
                                    #{cp.payRefNo}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{cp.currencyCode}
                                </p:column>
                                <p:column headerText="Paid" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(cp.paidAmount,cp.currencyCode)}
                                </p:column>
                            </p:dataTable>
                            <p:dataTable var="cp2" value="#{dashboardBean.dayCloseCashReceiptList2}">
                                <p:column headerText="By Pay Date" style="font-size: 11px;">
                                    #{cp2.payRefNo}
                                </p:column>
                                <p:column headerText="Currency" style="font-size: 11px;">
                                    #{cp2.currencyCode}
                                </p:column>
                                <p:column headerText="Paid" style="font-size: 11px;text-align: right;">
                                    #{utilityBean.formatDoubleToString(cp2.paidAmount,cp2.currencyCode)}
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </div>
                </div>
            </h:form>
        </div>
    </h:body>

</html>

